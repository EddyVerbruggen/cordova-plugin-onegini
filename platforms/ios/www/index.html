<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Onegini</title>
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1,  target-densitydpi=device-dpi" />
        <link rel="stylesheet" href="lib/jquery-mobile/css/jquery.mobile-1.4.5.min.css" />
        <link rel="stylesheet" href="css/index.css" />
        <script src="lib/jquery-mobile/js/jquery-2.1.3.min.js"></script>
        <script src="lib/jquery-mobile/js/jquery.mobile-1.4.5.min.js"></script>
    </head>
    <body>
        <article data-role="page" id="home">
            <header data-role="header" data-position="fixed">
                <h1>Onegini Cordova App</h1><a href="#debug" data-transition="slideup" class="ui-btn-right">Debug</a>
            </header>
            <section role="main" class="ui-content">
				<a data-btn-role="btnLogin" class="ui-btn">Login</a>
			</section>
        </article>
        <article data-role="page" id="authorized">
            <header data-role="header" data-position="fixed">
                <h1>Logged in</h1>
                <a data-btn-role="btnLogout" data-transition="slide" data-direction="reverse" class="ui-btn-left">Logout</a>
            </header>
            <section role="main" class="ui-content">
                <input type="button"
                       onClick="ogCordovaApp.app.fetchResource('/client/resource/profile', ['read'], 'GET', 'FORM', {});"
                       value="Fetch resource"/><br/>
                <input type="button" onClick="ogCordovaApp.app.changePin(['read']);" value="Change PIN"/>
                <a id="btnDisconnect" class="ui-btn">Disconnect app</a>
            </section>
        </article>
        <article data-role="page" id="debug">
            <header data-role="header" data-position="fixed">
                <h1>Onegini Cordova App</h1><a href="#home" data-transition="slide" data-direction="reverse" data-icon="arrow-l" class="ui-btn-left">Home</a>
            </header>
            <section role="main" class="ui-content">
                <input type="button" onClick="ogCordovaApp.app.clearCredentials();" value="Clear credentials"/><br/>
                <input type="button" onClick="ogCordovaApp.app.clearTokens();" value="Clear tokens"/><br/>
                <input type="button" onClick="ogCordovaApp.app.fetchAnonymousResource('/client/resource/profile', ['read'], 'GET', 'FORM', {});"
                       value="Fetch anonymous resource"/>
            </section>
        </article>
        <article data-role="page" id="askForPin">
            <header data-role="header" data-position="fixed">
                <h1>Enter Pincode</h1>
                <a data-btn-role="btnLogout" data-transition="slide" data-direction="reverse" class="ui-btn-left">Logout</a>
            </header>
            <section role="main" class="ui-content">
                <form action="" id="askForPinForm" method="post">
                    <label for="pin" class="ui-hidden-accessible">PIN</label>
                    <input type="password" id="pin" name="pin" pattern="\d*" size="5" placeholder="Pincode"
                            required="required"/>
                    <span id="pinMessage"></span>

                    <input type="submit" value="Login"/>
                </form>
            </section>
        </article>
        <article data-role="page" id="askForPinWithVerification">
            <header data-role="header" data-position="fixed">
                <h1>Enter Pincode</h1>
                <a data-btn-role="btnLogout" data-transition="slide" data-direction="reverse" class="ui-btn-left">Logout</a>
            </header>
            <section role="main" class="ui-content">
                <form action="" id="askForPinWithVerificationForm" method="post">
                    <label for="pinWithVerification" class="ui-hidden-accessible">PIN</label>
                    <input type="password" id="pinWithVerification" name="pinWithVerification" pattern="\d*" size="5"
                           placeholder="Pincode" required="required"/>
                    <label for="pinVerification" class="ui-hidden-accessible">Verify PIN</label>
                    <input type="password" id="pinVerification" name="pinVerification" pattern="\d*" size="5"
                           placeholder="Verify Pincode" required="required"/>
                    <span id="pinWithVerificationMessage"></span>

                    <input type="submit" value="Save Pincode"/>
                </form>
            </section>
        </article>
        <article data-role="page" id="authorizationFailed">
            <header data-role="header" data-position="fixed">
                <h1>Authorization failed</h1>
            </header>
            <section data-role="main" class="ui-content" id="errorContent">
                <p>Failed to authorize</p>
                <a data-btn-role="btnLogin" class="ui-btn">Try again</a>
            </section>
        </article>

        <article data-role="page" id="paused">
            <header data-role="header" data-position="fixed">
                <h1>Paused</h1>
            </header>
            <section data-role="main" class="ui-content">
                The application is paused
            </section>
        </article>

        <script type="text/x-handlebars-template" id="errorMessage">
            {{reason}}
        </script>

        <script src="cordova.js"></script>
        <script src="lib/handlebars/handlebars.runtime-v2.0.0.js"></script>
		<script src="js/index.js"></script>
	</body>
</html>
