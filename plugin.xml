<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0" xmlns:android="http://schemas.android.com/apk/res/android"
        id="cordova-plugin-onegini"
        version="2.0.0-SNAPSHOT">
  <name>OneginiCordovaPlugin</name>
  <description>Onegini Cordova Plugin</description>

  <!--<hook type="after_platform_add" src="hooks/configure_sdk.js" />-->
  <!--<hook type="before_plugin_install" src="hooks/resolve_dependencies.js" />-->

  <js-module src="www/onegini.js" name="onegini">
    <clobbers target="onegini"/>
  </js-module>
  <js-module src="www/device.js" name="device" />
  <js-module src="www/user.js" name="user" />
  <js-module src="www/utils.js" name="utils" />

  <platform name="ios">
    <config-file target="config.xml" parent="/*">
      <feature name="OneginiClient">
        <param name="ios-package" value="OneginiClient" />
      </feature>
      <feature name="OneginiUserRegistrationClient">
        <param name="ios-package" value="OneginiUserRegistrationClient" />
      </feature>
    </config-file>

    <header-file src="src/ios/classes/Reachability.h"/>
    <source-file src="src/ios/classes/Reachability.m"/>
    <header-file src="src/ios/classes/CDVPlugin+Onegini.h"/>
    <source-file src="src/ios/classes/CDVPlugin+Onegini.m"/>
    <header-file src="src/ios/classes/OneginiClient.h"/>
    <source-file src="src/ios/classes/OneginiClient.m"/>
    <header-file src="src/ios/classes/OneginiUserRegistrationClient.h"/>
    <source-file src="src/ios/classes/OneginiUserRegistrationClient.m"/>
    <header-file src="src/ios/classes/OneginiUserAuthenticationClient.h"/>
    <source-file src="src/ios/classes/OneginiUserAuthenticationClient.m"/>

    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGAuthenticationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGAuthenticator.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGChangePinDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGClient.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGClientBuilder.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGConfigModel.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGCreatePinChallenge.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGCustomizationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGDeregistrationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGDeviceAuthenticationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGDeviceClient.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGErrors.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGFingerprintChallenge.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGFingerprintDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGMobileAuthenticationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGNetworkTask.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGPinChallenge.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGPinValidationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGPublicCommons.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGPublicDefines.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGRegistrationDelegate.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGRequestBuilder.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGResourceRequest.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGResourceResponse.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGUserClient.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/ONGUserProfile.h"/>
    <header-file src="src/ios/OneginiSDKiOS/Headers/OneginiSDK.h"/>

    <source-file src="src/ios/OneginiSDKiOS/OneginiSDKiOS-5.00.00-SNAPSHOT-Release-fat-binary.a" framework="true"/>

    <framework src="libiconv.dylib"/>
    <framework src="libc++.dylib"/>

  </platform>
  <platform name="android">
    <config-file target="res/xml/config.xml" parent="/*">
      <feature name="OneginiClient">
        <param name="android-package" value="com.onegini.OneginiClient"/>
        <param name="onload" value="false"/>
      </feature>
      <feature name="OneginiUserClient">
        <param name="android-package" value="com.onegini.OneginiUserClient"/>
        <param name="onload" value="false"/>
      </feature>
      <feature name="OneginiUserRegistrationClient">
        <param name="android-package" value="com.onegini.OneginiUserRegistrationClient"/>
        <param name="onload" value="false"/>
      </feature>
    </config-file>
    <config-file target="AndroidManifest.xml" parent="/manifest">
      <uses-permission android:name="android.permission.INTERNET"/>
      <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
      <uses-permission android:name="android.permission.WAKE_LOCK" />
      <uses-permission android:name="android.permission.USE_FINGERPRINT" />
      <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
      <permission android:name="$PACKAGE_NAME.permission.C2D_MESSAGE" android:protectionLevel="signature" />
      <uses-permission android:name="$PACKAGE_NAME.permission.C2D_MESSAGE" />
    </config-file>
    <config-file target="AndroidManifest.xml" parent="application/activity">
      <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:scheme=""/> <!-- Intentionally Empty, SDK Configurator fills schemes from Token Server config. -->
      </intent-filter>
    </config-file>
    <!--config-file target="AndroidManifest.xml" parent="/manifest/application">
      <service android:name="com.onegini.gcm.GcmIntentService" />
      <receiver
          android:name="com.onegini.gcm.GcmBroadcastReceiver"
          android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
          <action android:name="com.google.android.c2dm.intent.RECEIVE" />
          <category android:name="$PACKAGE_NAME" />
        </intent-filter>
      </receiver>
    </config-file-->

    <!-- Google Play Services, GCM -->
    <!--<framework src="com.google.android.gms:play-services-base:7.8.0" />-->
    <!--<framework src="com.google.android.gms:play-services-gcm:7.8.0" />-->
    <framework src="com.android.support:multidex:1.0.0" />

    <!-- Build gradle -->
    <framework src="src/android/build-extras.gradle" custom="true" type="gradleReference" />

    <!-- Onegini Plugin -->
    <source-file src="src/android/src/android/com/onegini/OneginiClient.java"
                 target-dir="src/com/onegini/"/>
    <source-file src="src/android/src/android/com/onegini/OneginiUserClient.java"
                 target-dir="src/com/onegini/"/>
    <source-file src="src/android/src/android/com/onegini/OneginiUserRegistrationClient.java"
                 target-dir="src/com/onegini/"/>
    <source-file src="src/android/src/android/com/onegini/OneginiSDK.java"
                 target-dir="src/com/onegini/"/>

    <!-- util -->
    <source-file src="src/android/src/android/com/onegini/util/PluginResultBuilder.java" target-dir="src/com/onegini/util"/>

    <!-- handler -->
    <source-file src="src/android/src/android/com/onegini/handler/RegistrationHandler.java"
                 target-dir="src/com/onegini/handler"/>
    <source-file src="src/android/src/android/com/onegini/handler/CreatePinRequestHandler.java"
                 target-dir="src/com/onegini/handler/"/>
    <source-file src="src/android/src/android/com/onegini/handler/InitializationHandler.java"
                 target-dir="src/com/onegini/handler/"/>
    <source-file src="src/android/src/android/com/onegini/handler/PinAuthenticationRequestHandler.java"
                 target-dir="src/com/onegini/handler/"/>
  </platform>
</plugin>
